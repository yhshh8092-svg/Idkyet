<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>robbing.homes</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet" />
<style>
body {
  margin: 0;
  padding: 0;
  background: #000;
  color: #c3c3c3;
  font-family: 'VT323', monospace;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
  transition: background 0.1s ease;
}
#hidden-bg {
  position: fixed;
  inset: 0;
  background: url('https://files.catbox.moe/h9ysgu.webp') center/cover no-repeat;
  filter: brightness(0) blur(8px);
  transition: filter 0.15s ease;
  z-index: -2;
}
#bg {
  position: fixed;
  inset: 0;
  z-index: -1;
}
#intro {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}
#intro .glitch {
  font-size: 1.8rem;
  color: #ff3b3b;
  text-shadow: 0 0 6px #ff0000;
  animation: glitch 5s infinite, flicker 7s infinite;
}
#intro a {
  color: inherit;
  text-decoration: none;
}
#main-page {
  display: none;
  padding: 40px 20px;
  width: 100%;
  min-height: 100vh;
  box-sizing: border-box;
  color: #fff;
  overflow-y: auto;
}
h1 {
  text-align: center;
  margin-bottom: 20px;
}
.row {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-bottom: 20px;
}
.flip-card {
  width: 150px;
  height: 220px;
  perspective: 1000px;
  cursor: pointer;
  border-radius: 12px;
  overflow: hidden;
  border: 2px solid #fff;
}
.flip-card-inner {
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}
.flip-card:hover .flip-card-inner {
  transform: rotateY(180deg);
}
.flip-card-front, .flip-card-back {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 10px;
  box-sizing: border-box;
}
.flip-card-front {
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
}
.flip-card-front img {
  width: 100%;
  height: 65%;
  object-fit: cover;
  border-bottom: 2px solid #fff;
  transition: filter 0.1s;
}
.flip-card-front span {
  margin-top: 5px;
  font-weight: bold;
  text-align: center;
}
.flip-card-front .role {
  font-size: 12px;
  color: #ccc;
}
.flip-card-back {
  background: rgba(0, 0, 0, 0.85);
  transform: rotateY(180deg);
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}
.sparkle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #fff;
  border-radius: 50%;
  pointer-events: none;
  animation: fade 0.5s forwards;
}
@keyframes glitch {
  0% { transform: none; }
  20% { skew(0.5deg, 0.5deg); }
  40% { transform: translateX(-2px); }
  60% { transform: translateX(2px); }
  80% { skew(-0.5deg, -0.5deg); }
  100% { transform: none; }
}
@keyframes flicker {
  0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; }
  20%, 24%, 55% { opacity: 0.5; }
}
@keyframes fade {
  0% { opacity: 1; }
  100% { opacity: 0; transform: translateY(-10px); }
}
</style>
</head>
<body>
<div id="hidden-bg"></div>
<canvas id="bg"></canvas>
<div id="intro">
  <div class="glitch"><a href="#">robbing.homes</a></div>
</div>
<div id="main-page">
  <h1>robbing.homes</h1>
  <div id="rows-container"></div>
</div>
<script>
const titles = [
  "r","ro","rob","robb","robbi","robbin","robbing",
  "robbing.","robbing.h","robbing.ho","robbing.hom",
  "robbing.home","robbing.homes","robbing.home",
  "robbing.hom","robbing.ho","robbing.h",
  "robbing.","robbing","robbin","robbi","robb","rob","ro","r"
];

let titleIdx = 0;
setInterval(() => {
  document.title = titles[titleIdx];
  titleIdx = (titleIdx + 1) % titles.length;
}, 200);

document.addEventListener('mousemove', e => {
  const s = document.createElement('div');
  s.className = 'sparkle';
  s.style.left = `${e.pageX}px`;
  s.style.top = `${e.pageY}px`;
  document.body.appendChild(s);
  setTimeout(() => s.remove(), 500);
});

const intro = document.getElementById('intro');
const mainPage = document.getElementById('main-page');

const roster = [
  { name: 'Violence', role: 'Owner', img: 'https://files.catbox.moe/fy0v6l.png', bio: 'violence', profile: '#' },
  { name: 'Phantom', role: 'Co-Owner', img: 'https://files.catbox.moe/63sdgg.png', bio: 'snow leopard', profile: '#' }
];

intro.onclick = () => {
  intro.style.display = 'none';
  mainPage.style.display = 'block';
  loadRoster();
  initVisualizer();
};

function loadRoster() {
  const container = document.getElementById('rows-container');
  const row = document.createElement('div');
  row.className = 'row';
  roster.forEach(m => {
    const card = document.createElement('div');
    card.className = 'flip-card';
    card.innerHTML = `
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="${m.img}">
          <span>${m.name}</span>
          <div class="role">${m.role}</div>
        </div>
        <div class="flip-card-back">${m.bio}</div>
      </div>`;
    card.onclick = () => { window.location.href = m.profile; };
    row.appendChild(card);
  });
  container.appendChild(row);
}

async function initVisualizer() {
  const url = 'https://files.catbox.moe/wkdgui.mp3';
  const canvas = document.getElementById('bg');
  const ctx = canvas.getContext('2d');
  const hiddenBg = document.getElementById('hidden-bg');

  const resize = () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  };
  window.addEventListener('resize', resize);
  resize();

  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const response = await fetch(url);
  const buffer = await response.arrayBuffer();
  const audioBuffer = await audioCtx.decodeAudioData(buffer);
  const source = audioCtx.createBufferSource();
  source.buffer = audioBuffer;
  const analyser = audioCtx.createAnalyser();
  analyser.fftSize = 256;
  const dataArray = new Uint8Array(analyser.frequencyBinCount);
  source.connect(analyser);
  analyser.connect(audioCtx.destination);
  source.start();

  const elements = {
    body: document.body,
    menu: document.querySelector('.glitch'),
    title: document.querySelector('h1'),
    imgs: document.querySelectorAll('img'),
    frontCards: document.querySelectorAll('.flip-card-front'),
    backCards: document.querySelectorAll('.flip-card-back')
  };

  const render = () => {
    requestAnimationFrame(render);
    analyser.getByteFrequencyData(dataArray);
    const total = dataArray.reduce((sum, v) => sum + v, 0) / dataArray.length;
    const bass = dataArray.slice(0, 15).reduce((sum, v) => sum + v, 0) / 15;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const cx = canvas.width / 2;
    const cy = canvas.height / 2;
    const radius = 180 + bass * 2;
    const glow = Math.min(total / 100, 1);
    const gradient = ctx.createRadialGradient(cx, cy, 0, cx, cy, radius);
    gradient.addColorStop(0, `rgba(255,30,30,${0.8 * glow})`);
    gradient.addColorStop(0.6, `rgba(255,0,0,${0.3 * glow})`);
    gradient.addColorStop(1, `rgba(0,0,0,0)`);
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    hiddenBg.style.filter = `brightness(${Math.min(total / 50, 1.8)}) blur(${8 - Math.min(total / 80, 6)}px)`;
    document.body.style.background = `rgba(${bass * 2},0,0,${Math.min(total / 300, 0.3)})`;
    elements.menu.style.textShadow = `0 0 ${Math.min(total / 3, 80)}px #ff0000`;

    [...elements.frontCards].forEach(c => {
      c.style.boxShadow = `0 0 ${Math.min(bass / 2, 50)}px #ff0000`;
      c.style.borderColor = `rgba(255, ${total / 2}, ${total / 4}, 1)`;
      c.style.filter = `brightness(${1 + total / 200})`;
    });

    [...elements.backCards].forEach(c => {
      c.style.boxShadow = `inset 0 0 ${Math.min(bass / 2, 50)}px #ff0000`;
      c.style.background = `rgba(${Math.min(bass * 3, 255)}, 0, 0, ${0.3 + total / 400})`;
      c.style.borderColor = `rgba(255, ${total / 2}, ${total / 4}, 1)`;
      c.style.filter = `brightness(${1 + total / 250})`;
    });

    [...elements.imgs].forEach(i => {
      i.style.filter = `drop-shadow(0 0 ${Math.min(total / 2, 50)}px #ff0000)`;
    });

    if (elements.title) {
      elements.title.style.textShadow = `0 0 ${Math.min(total / 3, 50)}px #ff0000`;
    }
  };

  render();
}
</script>
</body>
</html>
